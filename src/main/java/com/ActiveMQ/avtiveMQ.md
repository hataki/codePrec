# 消息中间件之ActiveMq 

**全称：Java MessageService 中文：Java 消息服务。** 

## 消息中间件应用场景

### 异步通信

mq提供异步处理机制，允许在队列中放入消息且可以不立即处理，需要时在处理（使用场景：高并发的mysql写，因为写操作会设计到锁，多个写操作同时发生产生争夺锁，导致效率低下，此时异步队列写数据是一个很好的方法）

### 缓冲

mq通过一个缓冲层来帮助高效率执行，该缓冲有助于控制和优化数据流经过系统的速度。以调节系统响应时间。

### 解耦

降低工程之间的强依赖程度，针对异构系统进行适配。*通过消息系统在处理过程中间插入了一个隐含的、基于数据的接口层，两边的处理过程都要实现这一接口，当应用发生变化时，可以独立的扩展或修改两边的处理过程，只要确保它们遵守同样的接口约束。*

### 冗余

mq会把数据进行持久化知道他们已经被完全处理，通过此种方式规避数据丢失风险；许多的mq采用“插入-获取-删除”范式，把一个消息删除之前，需要系统明确指出该消息处理完毕。

### 扩展性

因为消息队列解耦了你的处理过程，所以增大消息入队和处理的频率是很容易的，只要另外增加处理过程即可。不需要改变代码、不需要调节参数。便于分布式扩容。

### 可恢复性

系统的一部分组件失效时，不会影响到整个系统。消息队列降低了进程间的耦合度，所以即使一个处理消息的进程挂掉，加入队列中的消息仍然可以在系统恢复后被处理。

### 顺序保证

大部分消息队列本来就是排序的，并且能保证数据会按照特定的顺序来处理。

### 过载保护

使用消息队列能够使关键组件顶住突发的访问压力，而不会因为突发的超负荷的请求而完全崩溃。

### 数据流处理

分布式系统产生的海量数据流，如：业务日志、监控数据、用户行为等，针对这些数据流进行实时或批量采集汇总，然后进行大数据分析是当前互联网的必备技术，通过消息队列完成此类数据收集是最好的选择。

### 总结

***缓冲大流量的数据流***

## 常用消息队列（ActiveMQ、RabbitMQ、RocketMQ、Kafka）比较



| 特性MQ           | ActiveMQ   | RabbitMQ   | RocketMQ         | Kafka            |
| ---------------- | ---------- | ---------- | ---------------- | ---------------- |
| 生产者消费者模式 | 支持       | 支持       | 支持             | 支持             |
| 发布订阅模式     | 支持       | 支持       | 支持             | 支持             |
| 请求回应模式     | 支持       | 支持       | 不支持           | 不支持           |
| Api完备性        | 高         | 高         | 高               | 高               |
| 多语言支持       | 支持       | 支持       | java             | 支持             |
| 单机吞吐量       | 万级       | 万级       | 万级             | 十万级           |
| 消息延迟         | 无         | 微秒级     | 毫秒级           | 毫秒级           |
| 可用性           | 高（主从） | 高（主从） | 非常高（分布式） | 非常高（分布式） |
| 消息丢失         | 低         | 低         | 理论上不会丢失   | 理论上不会丢失   |
| 文档的完备性     | 高         | 高         | 高               | 高               |
| 提供快速入门     | 有         | 有         | 有               | 有               |
| 社区活跃度       | 高         | 高         | 有               | 高               |
| 商业支持         | 无         | 无         | 商业云           | 商业云           |

## JMS中角色介绍

Broker

provider

consumer